/* Tailwind layers */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* 
  Design Tokens
  - Centralized CSS variables for colors, radii, spacing aliases, and shadows.
  - Light theme only (ThemeProvider forces light). Add a [data-theme="dark"] block in the future if needed.
*/

@layer base {
  :root {
    /* App surfaces */
    --bg: #f8fafc; /* gray-50 */
    --surface: #ffffff; /* white */
    --subtle: #f3f4f6; /* gray-100 */
    --border: #e5e7eb; /* gray-200 */
    --grid-dot: #d1d5db; /* gray-300 */

    /* Text */
    --foreground: #111827; /* gray-900 */
    --muted-foreground: #6b7280; /* gray-600 */
    --secondary-foreground: #374151; /* gray-700 */
    --inverse: #ffffff;

    /* Brand (Violet) */
    --brand-50: #f5f3ff;
    --brand-100: #ede9fe;
    --brand-200: #ddd6fe;
    --brand-300: #c4b5fd;
    --brand-500: #8b5cf6;
    --brand-600: #7c3aed;
    --brand-700: #6d28d9;

    /* Info (Blue) */
    --info-50: #eff6ff;
    --info-100: #dbeafe;
    --info-200: #bfdbfe;
    --info-600: #2563eb;
    --info-700: #1d4ed8;

    /* Success (Green) */
    --success-50: #ecfdf5;
    --success-100: #d1fae5;
    --success-200: #a7f3d0;
    --success-600: #16a34a;
    --success-700: #15803d;

    /* Warning (Amber/Yellow) */
    --warning-50: #fffbeb;
    --warning-100: #fef3c7;
    --warning-200: #fde68a;
    --warning-600: #d97706;
    --warning-700: #b45309;

    /* Danger (Red) */
    --danger-50: #fef2f2;
    --danger-100: #fee2e2;
    --danger-200: #fecaca;
    --danger-600: #dc2626;
    --danger-700: #b91c1c;

    /* Accent (Orange) */
    --accent-50: #fff7ed;
    --accent-100: #ffedd5;
    --accent-200: #fed7aa;
    --accent-600: #ea580c;
    --accent-700: #c2410c;

    /* Indigo (secondary brand accent) */
    --indigo-50: #eef2ff;
    --indigo-100: #e0e7ff;
    --indigo-200: #c7d2fe;
    --indigo-600: #4f46e5;
    --indigo-700: #4338ca;

    /* State */
    --disabled-bg: #e5e7eb; /* gray-200 */
    --disabled-fg: #9ca3af; /* gray-400 */
    --ring: var(--brand-500);

    /* Radii */
    --radius-sm: 6px;
    --radius-md: 8px;
    --radius-lg: 12px;

    /* Shadows */
    --shadow-1: 0 1px 2px rgba(0,0,0,0.05);
    --shadow-2: 0 2px 8px rgba(0,0,0,0.06);
    --shadow-3: 0 8px 24px rgba(0,0,0,0.08);
  }

  html, body {
    color: var(--foreground);
    background-color: var(--bg);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/*
  Semantic utilities
  - Token-aware classes you can use directly in components.
  - Keeps semantics stable even if token values change.
*/
@layer utilities {
  /* Backgrounds */
  .bg-app { background-color: var(--bg); }
  .bg-surface { background-color: var(--surface); }
  .bg-subtle { background-color: var(--subtle); }

  /* Text */
  .text-foreground { color: var(--foreground); }
  .text-muted { color: var(--muted-foreground); }
  .text-inverse { color: var(--inverse); }
  .text-secondary { color: var(--secondary-foreground); }

  /* Borders & Rings */
  .border-default { border-color: var(--border); }
  .ring-brand { --tw-ring-color: var(--ring); }

  /* Brand helpers */
  .bg-brand { background-color: var(--brand-600); }
  .hover\:bg-brand-700:hover { background-color: var(--brand-700); }
  .text-brand { color: var(--brand-600); }
  .bg-brand-50 { background-color: var(--brand-50); }
  .text-brand-700 { color: var(--brand-700); }
  .border-brand-200 { border-color: var(--brand-200); }

  /* Info */
  .bg-info-50 { background-color: var(--info-50); }
  .text-info-700 { color: var(--info-700); }
  .text-info-600 { color: var(--info-600); }
  .border-info-200 { border-color: var(--info-200); }

  /* Success */
  .bg-success-50 { background-color: var(--success-50); }
  .text-success-700 { color: var(--success-700); }
  .text-success-600 { color: var(--success-600); }
  .border-success-200 { border-color: var(--success-200); }

  /* Warning */
  .bg-warning-50 { background-color: var(--warning-50); }
  .text-warning-700 { color: var(--warning-700); }
  .text-warning-600 { color: var(--warning-600); }
  .border-warning-200 { border-color: var(--warning-200); }

  /* Danger */
  .bg-danger-50 { background-color: var(--danger-50); }
  .text-danger-700 { color: var(--danger-700); }
  .text-danger-600 { color: var(--danger-600); }
  .border-danger-200 { border-color: var(--danger-200); }

  /* Accent */
  .bg-accent-50 { background-color: var(--accent-50); }
  .text-accent-700 { color: var(--accent-700); }
  .text-accent-600 { color: var(--accent-600); }
  .border-accent-200 { border-color: var(--accent-200); }

  /* Indigo (secondary brand) */
  .bg-indigo-50-token { background-color: var(--indigo-50); }
  .text-indigo-600-token { color: var(--indigo-600); }
  .text-indigo-700-token { color: var(--indigo-700); }
  .border-indigo-200-token { border-color: var(--indigo-200); }

  /* Tones for alert/insight blocks */
  .tone-danger { background-color: var(--danger-50); border-color: var(--danger-200); color: var(--danger-700); }
  .tone-warning { background-color: var(--warning-50); border-color: var(--warning-200); color: var(--warning-700); }
  .tone-info { background-color: var(--info-50); border-color: var(--info-200); color: var(--info-700); }
  .tone-success { background-color: var(--success-50); border-color: var(--success-200); color: var(--success-700); }

  /* Tag chips for Flow nodes */
  .tag-friction { background-color: var(--danger-50); color: var(--danger-600); border-color: var(--danger-200); }
  .tag-handoff { background-color: var(--brand-50); color: var(--brand-600); border-color: var(--brand-200); }
  .tag-automated { background-color: var(--success-50); color: var(--success-600); border-color: var(--success-200); }
  .tag-trigger { background-color: var(--info-50); color: var(--info-700); border-color: var(--info-200); }

  /* Badge presets for AI Opportunities */
  .badge-success { background-color: var(--success-50); color: var(--success-700); border-color: var(--success-200); }
  .badge-warning { background-color: var(--warning-50); color: var(--warning-700); border-color: var(--warning-200); }
  .badge-danger { background-color: var(--danger-50); color: var(--danger-700); border-color: var(--danger-200); }

  /* Disabled */
  .bg-disabled { background-color: var(--disabled-bg); }
  .text-disabled { color: var(--disabled-fg); }

  /* Elevation helpers */
  .shadow-1 { box-shadow: var(--shadow-1); }
  .shadow-2 { box-shadow: var(--shadow-2); }
  .shadow-3 { box-shadow: var(--shadow-3); }

  /* Radii */
  .rounded-md-token { border-radius: var(--radius-md); }
  .rounded-lg-token { border-radius: var(--radius-lg); }

  /* Gradient helpers mapped to brand */
  .from-brand-50 { --tw-gradient-from: var(--brand-50) var(--tw-gradient-from-position); --tw-gradient-to: rgb(245 243 255 / 0) var(--tw-gradient-to-position); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
  .to-brand-100 { --tw-gradient-to: var(--brand-100) var(--tw-gradient-to-position); }

  /* 
    Safe remaps (override a subset of Tailwind utilities used in the codebase)
    - Routes legacy hardcoded colors to tokens behind the scenes.
    - Keeps code unchanged while enabling centralized theming.
  */

  /* Surfaces and app bg */
  .bg-white { background-color: var(--surface) !important; }
  .bg-gray-50 { background-color: var(--bg) !important; }
  .bg-gray-100 { background-color: var(--subtle) !important; }

  /* Borders */
  .border-gray-200 { border-color: var(--border) !important; }
  .border-violet-200 { border-color: var(--brand-200) !important; }
  .border-violet-700 { border-color: var(--brand-700) !important; }

  /* Text colors */
  .text-gray-900 { color: var(--foreground) !important; }
  .text-gray-800 { color: var(--secondary-foreground) !important; }
  .text-gray-700 { color: var(--secondary-foreground) !important; }
  .text-gray-600 { color: var(--muted-foreground) !important; }
  .text-gray-500 { color: var(--muted-foreground) !important; }
  .text-violet-600 { color: var(--brand-600) !important; }
  .text-violet-700 { color: var(--brand-700) !important; }
  .text-violet-100 { color: var(--brand-100) !important; }
  .text-green-600 { color: var(--success-600) !important; }
  .text-blue-600 { color: var(--info-600) !important; }
  .text-orange-600 { color: var(--accent-600) !important; }

  /* Brand backgrounds and hovers */
  .bg-violet-600 { background-color: var(--brand-600) !important; }
  .hover\:bg-violet-700:hover { background-color: var(--brand-700) !important; }
  .bg-violet-100 { background-color: var(--brand-50) !important; }

  /* Semantic backgrounds (info/success/warn/danger/accent/indigo) */
  .bg-blue-50 { background-color: var(--info-50) !important; }
  .text-blue-700 { color: var(--info-700) !important; }
  .bg-green-100 { background-color: var(--success-50) !important; }
  .text-green-700 { color: var(--success-700) !important; }
  .bg-yellow-100 { background-color: var(--warning-50) !important; }
  .text-yellow-600 { color: var(--warning-600) !important; }
  .bg-red-100 { background-color: var(--danger-50) !important; }
  .text-red-600 { color: var(--danger-600) !important; }
  .bg-orange-100 { background-color: var(--accent-50) !important; }
  .text-orange-600 { color: var(--accent-600) !important; }
  .bg-indigo-100 { background-color: var(--indigo-50) !important; }
  .text-indigo-600 { color: var(--indigo-600) !important; }

  /* Rings mapped to brand */
  .focus-within\:ring-violet-100:focus-within { --tw-ring-color: var(--brand-100) !important; }
  .focus-within\:ring-violet-500:focus-within { --tw-ring-color: var(--brand-500) !important; }
  .ring-violet-100 { --tw-ring-color: var(--brand-100) !important; }
  .ring-violet-300 { --tw-ring-color: var(--brand-300) !important; }
  .ring-violet-500 { --tw-ring-color: var(--brand-500) !important; }

  /* Gradients */
  .from-violet-50 { --tw-gradient-from: var(--brand-50) var(--tw-gradient-from-position) !important; --tw-gradient-to: rgb(245 243 255 / 0) var(--tw-gradient-to-position) !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to) !important; }
  .to-purple-50 { --tw-gradient-to: var(--brand-100) var(--tw-gradient-to-position) !important; }

  /* Canvas grid alignment (used in Canvas component via inline CSS as well) */
  .grid-dot-bg {
    background-image: radial-gradient(circle, var(--grid-dot) 1px, transparent 1px);
  }
}
