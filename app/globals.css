/* Tailwind layers */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   Design Tokens (Pastel Workflow Aesthetic)
   ========================= */
@layer base {
  :root {
    /* Brand (soft violet as primary accent) */
    --brand-50: #f4f1ff;
    --brand-100: #ece7ff;
    --brand-200: #ded4ff;
    --brand-300: #c8b6ff;
    --brand-400: #b39bff;
    --brand-500: #9a7eff;
    --brand-600: #7d60f2;
    --brand-700: #6d4fe5;

    /* Supporting hues (for badges/icons) */
    --blue-500: #4f7cff;
    --green-500: #22c55e;
    --yellow-500: #f59e0b;
    --red-500: #ef4444;
    --indigo-500: #6366f1;
    --orange-500: #fb923c;

    /* Surfaces */
    --app-bg: #f8f7ff;          /* paper-like base */
    --surface: #ffffff;         /* main cards/panels */
    --subtle: #f5f5fb;          /* muted fills */
    --popover: #ffffff;

    /* Borders */
    --border: #e9e7f7;          /* very light violet-gray */
    --border-strong: #d9d6ef;

    /* Text */
    --fg-900: #0f172a;          /* primary */
    --fg-800: #1f2937;
    --fg-700: #374151;
    --fg-muted: #6b7280;        /* secondary */
    --fg-on-brand: #ffffff;

    /* Focus & Rings */
    --ring: var(--brand-300);

    /* Elevation */
    --shadow-1: 0 1px 2px rgba(17, 24, 39, 0.05);
    --shadow-2: 0 4px 16px rgba(109, 79, 229, 0.08);
    --shadow-3: 0 12px 32px rgba(109, 79, 229, 0.12);

    /* Canvas Grid */
    --grid-dot: #ece8ff;        /* softer dots */
    --canvas-bg: #fcfbff;

    /* Radii */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 20px;
    --radius-pill: 999px;
  }

  html, body {
    color: var(--fg-900);
    background-color: var(--app-bg);
    /* Soft ambient gradient background (top-right and bottom-left) */
    background-image:
      radial-gradient(800px 600px at 90% -10%, rgba(186, 160, 255, 0.25), transparent 60%),
      radial-gradient(900px 700px at -10% 110%, rgba(255, 171, 203, 0.22), transparent 60%);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  * {
    @apply border-border;
  }

  /* Base color scheme for shadcn primitives via CSS variables */
  :root {
    --background: 0 0% 100%;
    --foreground: 224 71.4% 4.1%;
    --card: 0 0% 100%;
    --card-foreground: 224 71.4% 4.1%;
    --popover: 0 0% 100%;
    --popover-foreground: 224 71.4% 4.1%;
    --primary: 255 92% 68%;
    --primary-foreground: 0 0% 100%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 224 71.4% 4.1%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 224 8% 46%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 224 71.4% 4.1%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 247 37% 92%;
    --input: 247 37% 92%;
    --ring: 255 92% 68%;
    --radius: 0.75rem;
  }

  body {
    @apply bg-background text-foreground;
  }

  /* Accessible focus styles */
  *:focus-visible {
    outline: 2px solid var(--brand-300);
    outline-offset: 2px;
  }

  textarea:focus {
    outline: none !important;
  }
}

/* =========================
   Semantic Utilities
   ========================= */
@layer utilities {
  /* Surfaces */
  .bg-app { background-color: var(--app-bg); }
  .bg-surface { background-color: var(--surface); }
  .bg-subtle { background-color: var(--subtle); }
  .border-default { border-color: var(--border); }

  /* Text */
  .text-secondary { color: var(--fg-700); }
  .text-muted { color: var(--fg-muted); }
  .text-brand { color: var(--brand-600); }

  /* Brand surfaces */
  .bg-brand { background-color: var(--brand-600); }
  .bg-brand-50 { background-color: var(--brand-50); }
  .hover\:bg-brand-700:hover { background-color: var(--brand-700); }

  /* Elevations */
  .shadow-e1 { box-shadow: var(--shadow-1); }
  .shadow-e2 { box-shadow: var(--shadow-2); }
  .shadow-e3 { box-shadow: var(--shadow-3); }

  /* Rounded helpers */
  .rounded-pill { border-radius: var(--radius-pill); }
  .rounded-xl-token { border-radius: var(--radius-xl); }

  /* Canvas background (light grid) */
  .designer-canvas {
    background-color: var(--canvas-bg);
    background-image:
      radial-gradient(circle, var(--grid-dot) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  /* Glassy card style used for toolbars/dropdowns if needed */
  .ui-glass {
    background: rgba(255,255,255,0.9);
    backdrop-filter: saturate(1.2) blur(6px);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-2);
  }

  /* Token remaps to steer existing class usage into the new system */
  .bg-white { background-color: var(--surface) !important; }
  .bg-gray-50 { background-color: var(--app-bg) !important; }
  .bg-gray-100 { background-color: var(--subtle) !important; }

  .border-gray-200 { border-color: var(--border) !important; }
  .border-violet-700 { border-color: var(--brand-700) !important; }
  .border-violet-200 { border-color: var(--brand-200) !important; }

  .text-gray-900 { color: var(--fg-900) !important; }
  .text-gray-800 { color: var(--fg-800) !important; }
  .text-gray-700 { color: var(--fg-700) !important; }
  .text-gray-600 { color: var(--fg-muted) !important; }
  .text-violet-600 { color: var(--brand-600) !important; }
  .text-violet-100 { color: var(--brand-100) !important; }

  .bg-violet-600 { background-color: var(--brand-600) !important; }
  .hover\:bg-violet-700:hover { background-color: var(--brand-700) !important; }
  .bg-violet-100 { background-color: var(--brand-50) !important; }

  /* Icons/Badges helpers */
  .badge-soft {
    @apply inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-pill border border-default bg-subtle;
  }
}
